<app-base-page>
    <div class="w-full h-full flex flex-col justify-center items-center text-my-light-grey px-[5%]">
        <app-alert
            *ngIf="alertType !== null"
            [type]="alertType"
        >
        </app-alert>
        
        <h1 class="self-start text-xl md:text-3xl drop-shadow-lg">Cadastro de música</h1>

        <form class="w-full flex flex-col justify-center items-center text-gray-400 text-xs md:text-md" 
            [formGroup]="songForm" 
            (ngSubmit)="onSubmit()">

            <div class="h-16 mt-5 w-full">
                <input id="name"
                    type="text"
                    placeholder="Nome"
                    formControlName="name"
                    class="h-9 w-full bg-[#0F0A0A] border-[1px] border-gray-400 rounded-md pl-[14px]"
                    [ngClass]="{'is-invalid': submitted && songForm.controls['name'].errors }"
                />
                @if (submitted && songForm.controls['name'].errors) {
                    <div class="invalid-feedback">
                        @if (submitted && songForm.controls['name'].errors['required']) {
                            <div class="text-xs text-red-600">Nome de música é obrigatório</div>
                        }
                    </div>
                }
            </div>
            <div class="h-16 w-full">
                <input id="artist"
                    type="text"
                    placeholder="Artista"
                    formControlName="artist"
                    class="h-9 w-full bg-[#0F0A0A] border-[1px] border-gray-400 rounded-md text-gray-400 pl-[14px] text-xs md:text-md"
                    [ngClass]="{'is-invalid': submitted && songForm.controls['artist'].errors }"
                />
                @if (submitted && songForm.controls['artist'].errors) {
                    <div class="invalid-feedback">
                        @if (submitted && songForm.controls['artist'].errors['required']) {
                            <div class="text-xs text-red-600">Nome do artista é obrigatório</div>
                        }
                    </div>
                }
            </div>

            <div class="h-16 w-full">
                <input id="album"
                    type="text"
                    placeholder="Álbum"
                    formControlName="album"
                    class="h-9 w-full bg-[#0F0A0A] border-[1px] border-gray-400 rounded-md text-gray-400 pl-[14px] text-xs md:text-md"
                    [ngClass]="{'is-invalid': submitted && songForm.controls['album'].errors }"
                />
                @if (submitted && songForm.controls['album'].errors) {
                    <div class="invalid-feedback">
                        @if (submitted && songForm.controls['album'].errors['required']) {
                            <div class="text-xs text-red-600">Nome do álbum é obrigatório</div>
                        }
                    </div>
                }
            </div>

            <div class="flex flex-col w-full">
                <input #fileInput class="text-white" type="file" (change)="selectFile($event)" />
            </div>
            <button
                class="p-1 h-8 md:h-9 w-32 md:w-48 text-sm md:text-md mt-5 self-start bg-my-orange text-my-black rounded-md font-bold hover:opacity-75 cursor-pointer"
                type="submit"
                >
                Cadastrar
            </button>
        </form>
    </div>
</app-base-page>